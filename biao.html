<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="./static/js/echarts.js"></script>
	<style type="text/css">
		.btn{
			padding:0 0.9375rem;
			height:30px;
			float: right;
			margin-left:20px;
		}
	</style>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
	
    <div id="main" style="width: 750px;height:400px;margin: 0 auto;"></div>
	
	<div style="width: 46.875rem;height:40px;margin:0 auto;margin-top:40px;">
		<button id="btn1" class="btn">外出务工，本地务工</button>
		<button id='btn2' class="btn">各乡镇外出务工人数</button>
		<!-- <button id="btn3" class="btn">外出务工人员各省分布情况</button> -->
	</div>
	
	<script src="./static/js/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
		
		function charts(title,dates){
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        // 指定图表的配置项和数据
        option = {
            title: {
                text: title,
                // subtext: '纯属虚构',
                left: 'center'
            },
            tooltip: {trigger: 'item',formatter: '{a} <br/>{b} : {c} ({d}%)'},
			 legend: {type: 'scroll',orient: 'vertical',right: 10,top: 20,bottom: 20,},
            series: [
                {
                            name: '',
                            type: 'pie',
                            radius: '55%',
							data:dates,
							emphasis: {//块阴影
							     itemStyle: {
							                    shadowBlur: 10,
							                    shadowOffsetX: 0,
							                    shadowColor: 'rgba(0, 0, 0, 0.5)'
							                }
							},
							label : {
							　　　　normal : {
							　　　　　　formatter: '{b}({d}%)',
							　　　　　　textStyle : {fontWeight : 'normal',fontSize : 15}
							　　　　}
							　　},
                        }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
		};
		let dat = [
			       {value:602, name:'务工，本地务工'},
		           {value:452, name:'各乡镇外出务工人数'},
				   {value:752, name:'外出务工人员各'},
				  ];
//ajax
		function git_date(title,ids){
				   $.ajax({
				     url:'http://23347gd009.iok.la/index/index/querykeyword',
				     type: 'post',
				     // 设置的是请求参数
				     data:{keyword:ids},
				     dataType: 'json',
				     success: function (res) {
				        dat = res.data;
						console.log(res)
						charts(title,dat);
				     }
				 })  
		};
		git_date('外出务工，本地务工',1);//页面加载默认加载第一项数据
		$('#btn1').on('click',()=>{
			git_date('外出务工，本地务工',1);//
		})
		$('#btn2').on('click',()=>{
			git_date('各乡镇外出务工人数',2);//
		})
		$('#btn3').on('click',()=>{
			git_date('外出务工人员各省分布情况',3);//
		})
		
    </script>
</body>
</html>